<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive English Planner</title>
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Nosso CSS -->
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="bi bi-journal-text me-2"></i>
                Interactive English Planner
            </a>
            <div class="d-flex align-items-center">
                <span class="me-3 text-muted d-none d-md-block" id="currentDate"></span>
                <button class="btn btn-outline-primary btn-sm" onclick="toggleSidebar()">
                    <i class="bi bi-list"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Mobile Sidebar Overlay -->
    <div class="mobile-sidebar-overlay" id="mobileSidebarOverlay" onclick="toggleSidebar()"></div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="p-3">
            <div class="mb-4">
                <h5 class="text-primary mb-3">Menu Principal</h5>
                <div class="list-group list-group-flush">
                    <a href="#" class="list-group-item list-group-item-action border-0 py-3" onclick="showSection('dashboard')">
                        <i class="bi bi-speedometer2 me-2"></i> Dashboard
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 py-3" onclick="showSection('week-view')">
                        <i class="bi bi-calendar-week me-2"></i> Visão Semanal
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 py-3" onclick="showSection('classes')">
                        <i class="bi bi-people me-2"></i> Turmas
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 py-3" onclick="showSection('students')">
                        <i class="bi bi-person me-2"></i> Alunos
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 py-3" onclick="showSection('lessons')">
                        <i class="bi bi-journal-check me-2"></i> Planejamento
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 py-3" onclick="showSection('reports')">
                        <i class="bi bi-graph-up me-2"></i> Relatórios
                    </a>
                </div>
            </div>
            
            <hr>
            
            <div class="mb-4">
                <h6 class="text-muted mb-3">Próximas Aulas</h6>
                <div id="nextClassesList"></div>
            </div>
            
            <hr>
            
            <div class="mt-4">
                <button class="btn btn-primary w-100 mb-2" onclick="saveToGitHub()">
                    <i class="bi bi-cloud-upload me-2"></i> Salvar no GitHub
                </button>
                <button class="btn btn-export w-100 mb-2" onclick="exportData()">
                    <i class="bi bi-download me-2"></i> Exportar Dados
                </button>
                <button class="btn btn-outline-secondary w-100" onclick="showSection('settings')">
                    <i class="bi bi-gear me-2"></i> Configurações
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Dashboard Section -->
        <section id="dashboard" class="section-content">
            <div class="row mb-4">
                <div class="col-12">
                    <h2>Dashboard</h2>
                    <p class="text-muted">Visão geral do seu planejamento</p>
                </div>
            </div>
            
            <div class="row mb-4">
                <div class="col-md-3 mb-3">
                    <div class="card bg-primary text-white">
                        <div class="card-body">
                            <h1 class="card-title" id="totalClasses">0</h1>
                            <p class="card-text">Turmas Ativas</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="card bg-success text-white">
                        <div class="card-body">
                            <h1 class="card-title" id="totalStudents">0</h1>
                            <p class="card-text">Total de Alunos</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="card bg-warning text-white">
                        <div class="card-body">
                            <h1 class="card-title" id="weekClasses">0</h1>
                            <p class="card-text">Aulas Esta Semana</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="card bg-info text-white">
                        <div class="card-body">
                            <h1 class="card-title" id="pendingPlanning">0</h1>
                            <p class="card-text">Planejamentos Pendentes</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Aula de Hoje</h5>
                        </div>
                        <div class="card-body">
                            <div id="todayClass"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Próximas Aulas</h5>
                        </div>
                        <div class="card-body">
                            <div id="upcomingClasses"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Week View Section -->
        <section id="week-view" class="section-content d-none">
            <div class="row mb-4">
                <div class="col-12">
                    <h2>Visão Semanal</h2>
                    <p class="text-muted">Todas as suas turmas na semana</p>
                </div>
            </div>
            
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="row" id="weekDays"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Detalhes do Dia</h5>
                        </div>
                        <div class="card-body">
                            <div id="dayDetails"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Classes Section -->
        <section id="classes" class="section-content d-none">
            <div class="row mb-4">
                <div class="col-12 d-flex justify-content-between align-items-center">
                    <div>
                        <h2>Turmas</h2>
                        <p class="text-muted">Gerencie suas turmas</p>
                    </div>
                    <button class="btn btn-primary" onclick="showAddClassModal()">
                        <i class="bi bi-plus-circle me-2"></i> Nova Turma
                    </button>
                </div>
            </div>
            
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <div id="classesList"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Students Section -->
        <section id="students" class="section-content d-none">
            <div class="row mb-4">
                <div class="col-12 d-flex justify-content-between align-items-center">
                    <div>
                        <h2>Alunos</h2>
                        <p class="text-muted">Gerencie todos os alunos</p>
                    </div>
                    <button class="btn btn-primary" onclick="showAddStudentModal()">
                        <i class="bi bi-person-plus me-2"></i> Novo Aluno
                    </button>
                </div>
            </div>
            
            <div class="row mb-3">
                <div class="col-md-6">
                    <input type="text" class="form-control" placeholder="Buscar aluno..." id="searchStudent">
                </div>
                <div class="col-md-3">
                    <select class="form-control" id="filterClass">
                        <option value="">Todas as turmas</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <select class="form-control" id="filterLesson">
                        <option value="">Todas as lições</option>
                    </select>
                </div>
            </div>
            
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <div id="studentsList"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Lessons Planning Section -->
        <section id="lessons" class="section-content d-none">
            <div class="row mb-4">
                <div class="col-12">
                    <h2>Planejamento de Aulas</h2>
                    <p class="text-muted">Planeje suas aulas interativas</p>
                </div>
            </div>
            
            <div class="row mb-3">
                <div class="col-md-4">
                    <select class="form-control" id="selectClassForPlanning">
                        <option value="">Selecione uma turma</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <input type="date" class="form-control" id="planningDate">
                </div>
                <div class="col-md-4">
                    <button class="btn btn-primary w-100" onclick="generateAttendanceOrder()">
                        <i class="bi bi-magic me-2"></i> Gerar Ordem
                    </button>
                </div>
            </div>
            
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Ordem de Atendimento</h5>
                        </div>
                        <div class="card-body">
                            <div id="attendanceOrder"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Planejamento Interativo</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card phase-card phase-opening">
                                        <div class="card-body">
                                            <h6>Opening (5 min)</h6>
                                            <p class="small text-muted">Introdução e objetivos</p>
                                        </div>
                                    </div>
                                    <div class="card phase-card phase-self-study">
                                        <div class="card-body">
                                            <h6>Self Study (15 min)</h6>
                                            <p class="small text-muted">Estudo individual</p>
                                        </div>
                                    </div>
                                    <div class="card phase-card phase-teacher-support">
                                        <div class="card-body">
                                            <h6>Teacher Support (20 min)</h6>
                                            <p class="small text-muted">Suporte individualizado</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card phase-card phase-peer-work">
                                        <div class="card-body">
                                            <h6>Peer Work (15 min)</h6>
                                            <p class="small text-muted">Trabalho em pares</p>
                                            <div id="peerWorkPairs"></div>
                                        </div>
                                    </div>
                                    <div class="card phase-card phase-closing">
                                        <div class="card-body">
                                            <h6>Closing (5 min)</h6>
                                            <p class="small text-muted">Revisão e feedback</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Reports Section -->
        <section id="reports" class="section-content d-none">
            <div class="row mb-4">
                <div class="col-12">
                    <h2>Relatórios</h2>
                    <p class="text-muted">Análise de progresso e desempenho</p>
                </div>
            </div>
            
            <div class="row mb-4">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <select class="form-control" id="reportClassSelect">
                                <option value="">Selecione uma turma</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <select class="form-control" id="reportType">
                                <option value="progress">Progresso Geral</option>
                                <option value="attendance">Frequência</option>
                                <option value="fale">Avaliações F.A.L.E</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <button class="btn btn-primary w-100" onclick="generateReport()">
                                <i class="bi bi-file-earmark-text me-2"></i> Gerar Relatório
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <div id="reportContent"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="section-content d-none">
            <div class="row mb-4">
                <div class="col-12">
                    <h2>Configurações</h2>
                    <p class="text-muted">Configure sua plataforma</p>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Configuração do GitHub</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label class="form-label">Nome de Usuário</label>
                                <input type="text" class="form-control" id="githubUsername" placeholder="seu-usuario">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Repositório</label>
                                <input type="text" class="form-control" id="githubRepo" placeholder="seu-repositorio">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Token de Acesso</label>
                                <input type="password" class="form-control" id="githubToken" placeholder="token-github">
                            </div>
                            <button class="btn btn-primary" onclick="saveGitHubConfig()">
                                <i class="bi bi-save me-2"></i> Salvar Configuração
                            </button>
                            <button class="btn btn-outline-success ms-2" onclick="loadFromGitHub()">
                                <i class="bi bi-cloud-download me-2"></i> Carregar do GitHub
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Preferências</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label class="form-label">Auto-save</label>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="autoSave" checked>
                                    <label class="form-check-label">Salvar automaticamente</label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Notificações</label>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="notifications" checked>
                                    <label class="form-check-label">Mostrar notificações</label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Tema</label>
                                <select class="form-control" id="themeSelect">
                                    <option value="light">Claro</option>
                                    <option value="dark">Escuro</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Backup de Dados</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <button class="btn btn-outline-primary w-100 mb-2" onclick="exportData()">
                                        <i class="bi bi-download me-2"></i> Exportar Dados (JSON)
                                    </button>
                                    <p class="small text-muted">Baixe um backup completo dos seus dados</p>
                                </div>
                                <div class="col-md-6">
                                    <button class="btn btn-outline-success w-100 mb-2" onclick="importData()">
                                        <i class="bi bi-upload me-2"></i> Importar Dados
                                    </button>
                                    <p class="small text-muted">Restaurar dados de um backup</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modals -->
    <!-- Add/Edit Class Modal -->
    <div class="modal fade" id="addClassModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="classModalTitle">Nova Turma</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="editClassId" value="">
                    <div class="mb-3">
                        <label class="form-label">Nome da Turma</label>
                        <input type="text" class="form-control" id="className" placeholder="Ex: INT W (Seg-Qua) 16h">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Dias da Semana</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="segunda" id="daySegunda">
                            <label class="form-check-label" for="daySegunda">Segunda-feira</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="terca" id="dayTerca">
                            <label class="form-check-label" for="dayTerca">Terça-feira</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="quarta" id="dayQuarta">
                            <label class="form-check-label" for="dayQuarta">Quarta-feira</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="quinta" id="dayQuinta">
                            <label class="form-check-label" for="dayQuinta">Quinta-feira</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="sexta" id="daySexta">
                            <label class="form-check-label" for="daySexta">Sexta-feira</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="sabado" id="daySabado">
                            <label class="form-check-label" for="daySabado">Sábado</label>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Horário</label>
                        <input type="time" class="form-control" id="classTime" value="16:00">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Cor da Turma</label>
                        <div>
                            <span class="color-picker" style="background:#3498db;" onclick="selectColor('#3498db')"></span>
                            <span class="color-picker" style="background:#e74c3c;" onclick="selectColor('#e74c3c')"></span>
                            <span class="color-picker" style="background:#2ecc71;" onclick="selectColor('#2ecc71')"></span>
                            <span class="color-picker" style="background:#f39c12;" onclick="selectColor('#f39c12')"></span>
                            <span class="color-picker" style="background:#9b59b6;" onclick="selectColor('#9b59b6')"></span>
                            <span class="color-picker" style="background:#1abc9c;" onclick="selectColor('#1abc9c')"></span>
                        </div>
                        <input type="hidden" id="classColor" value="#3498db">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="saveClass()">Salvar Turma</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Student Modal -->
    <div class="modal fade" id="addStudentModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="studentModalTitle">Novo Aluno</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="editStudentId" value="">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Nome do Aluno</label>
                            <input type="text" class="form-control" id="studentName">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Turma</label>
                            <select class="form-control" id="studentClass">
                                <option value="">Selecione uma turma</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Última Lição Feita</label>
                            <input type="text" class="form-control" id="lastLesson" placeholder="Ex: 169, RW1, RW2">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Próxima Lição</label>
                            <input type="text" class="form-control" id="nextLesson" placeholder="Ex: 170, RW1, RW2">
                        </div>
                    </div>
                    
                    <h6 class="mt-4 mb-3">Avaliações F.A.L.E</h6>
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <label class="form-label">Fluência (F)</label>
                            <select class="form-control" id="scoreF">
                                <option value="O">Ótimo (O)</option>
                                <option value="MB">Muito Bom (MB)</option>
                                <option value="B" selected>Bom (B)</option>
                                <option value="R">Regular (R)</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label class="form-label">Pronúncia (A)</label>
                            <select class="form-control" id="scoreA">
                                <option value="O">Ótimo (O)</option>
                                <option value="MB">Muito Bom (MB)</option>
                                <option value="B" selected>Bom (B)</option>
                                <option value="R">Regular (R)</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label class="form-label">Compreensão (L)</label>
                            <select class="form-control" id="scoreL">
                                <option value="O">Ótimo (O)</option>
                                <option value="MB">Muito Bom (MB)</option>
                                <option value="B" selected>Bom (B)</option>
                                <option value="R">Regular (R)</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label class="form-label">Expressão (E)</label>
                            <select class="form-control" id="scoreE">
                                <option value="O">Ótimo (O)</option>
                                <option value="MB">Muito Bom (MB)</option>
                                <option value="B" selected>Bom (B)</option>
                                <option value="R">Regular (R)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="alert alert-info mt-3">
                        <i class="bi bi-info-circle me-2"></i>
                        Média calculada automaticamente: 
                        <strong id="calculatedAverage">Bom (2.0)</strong>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="saveStudent()">Salvar Aluno</button>
                </div>
            </div>
        </div>
    </div>

    <!-- GitHub Status -->
    <div class="github-status" id="githubStatus">
        <div class="d-flex align-items-center">
            <i class="bi bi-check-circle-fill me-2 text-success"></i>
            <span id="githubStatusText">Salvo com sucesso!</span>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay d-none" id="loadingOverlay">
        <div class="text-center">
            <div class="spinner-border text-primary mb-3" style="width: 3rem; height: 3rem;"></div>
            <h5>Processando...</h5>
        </div>
    </div>

    <!-- Bootstrap & jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Our JS -->
    <script src="js/app.js"></script>
</body>
</html>
